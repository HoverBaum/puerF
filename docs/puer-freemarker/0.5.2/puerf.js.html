<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>puerf.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-helper.html">helper</a><ul class='methods'><li data-type='method'><a href="module-helper.html#.absolutePath">absolutePath</a></li><li data-type='method'><a href="module-helper.html#.guarantyFolder">guarantyFolder</a></li><li data-type='method'><a href="module-helper.html#.loadModule">loadModule</a></li></ul></li><li><a href="module-initializer.html">initializer</a></li><li><a href="module-logger.html">logger</a><ul class='methods'><li data-type='method'><a href="module-logger.html#.debug">debug</a></li><li data-type='method'><a href="module-logger.html#.disable">disable</a></li><li data-type='method'><a href="module-logger.html#.enable">enable</a></li><li data-type='method'><a href="module-logger.html#.enableDebug">enableDebug</a></li><li data-type='method'><a href="module-logger.html#.error">error</a></li><li data-type='method'><a href="module-logger.html#.info">info</a></li><li data-type='method'><a href="module-logger.html#.log">log</a></li><li data-type='method'><a href="module-logger.html#.silly">silly</a></li><li data-type='method'><a href="module-logger.html#.warn">warn</a></li></ul></li><li><a href="module-puer-freemarker.html">puer-freemarker</a><ul class='methods'><li data-type='method'><a href="module-puer-freemarker.html#.close">close</a></li><li data-type='method'><a href="module-puer-freemarker.html#.init">init</a></li><li data-type='method'><a href="module-puer-freemarker.html#.start">start</a></li></ul></li><li><a href="module-puerServer.html">puerServer</a></li></ul><h3>Global</h3><ul><li><a href="global.html#cli">cli</a></li><li><a href="global.html#collectRoutes">collectRoutes</a></li><li><a href="global.html#fs">fs</a></li><li><a href="global.html#logger">logger</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">puerf.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>#! /usr/bin/env node
/**
    Commandline interface for puerF.
*/

//Use commander to handle commanline interaction.
var cli = require('commander');

//Get the npm packe so we can read from it.
var packageInfo = require('./../package.json');

//Log output.
var logger = require('./logger');

//The actual application this is a cli interface for.
var puerf = require('./index');

/**
 *   Helper function to collect repeated arguments
 */
function collectRoutes(val, all) {
    all.push(val);
    return all;
}

//Configure commandline usage.
cli
    .version(packageInfo.version)
    .usage('[cmd] [options]')
    .description('Start a puer Server, easily mock routes and render FreeMarker templates')
    .option('-r, --routes &lt;file>', 'Configuration file for mocked routes (multiple possible)', collectRoutes, [])
    .option('-c, --config', 'If a config file should be used')
    .option('-t, --templates &lt;path>', 'Path to folder in which Freemarker templates are stored')
    .option('-r, --root &lt;folder>', 'The root folder that files should be served from')
    .option('-p, --port &lt;number>', 'Specific port to use')
    .option('-w, --watch &lt;files>', 'Filetypes to watch, defaults to js|css|html|xhtml|ftl')
    .option('-x, --exclude &lt;files>', 'Exclude files from being watched for updates')
    .option('-l, --localhost', 'Use "localhost" instead of "127.0.0.1"')
    .option('--no-browser', 'Do not autimatically open a brwoser')
    .option('--debug', 'Display debug messages')

//Define a set up command
cli
    .command('init')
    .usage('[options]')
    .description('Set up basic folders and files to work with puerf')
    .option('--only-config', 'Only generate a config file')
    .action(function(options) {
        puerf.init(options);
    });

//Give some more help text
cli.on('--help', function() {
    console.log('  More info:');
    console.log('');
    console.log('    visit https://github.com/HoverBaum/puerF');
});


//Runn commander.js
cli.parse(process.argv);

//Set up handling of undcaught errors, so that we won't crash.
if(!cli.debug) {
    process.on('uncaughtException', function(err) {
        logger.error('Congratulations, you found a bug\nShould this keep happening, please:\n  - run with --debug\n  - file a bug report at https://github.com/HoverBaum/puerF/issues');
        logger.error(err);
    });
}



//Check if we are not running other commands.
if(cli.args.every(command => {
    command._name !== 'init';
})) {

    puerf.start(cli);

}
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Wed Apr 20 2016 17:45:38 GMT+0800 (中国标准时间) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
